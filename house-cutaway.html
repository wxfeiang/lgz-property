<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>房间管理</title>
	<meta name="keywords" content="">
	<meta name="description" content="">
	<link rel="stylesheet" href="lib/layui/css/layui.css" />
	<link rel="stylesheet" href="css/rest.css">
	<link rel="stylesheet" href="css/public.css" />
	<link rel="stylesheet" href="css/houseView.css" />
	<style>
	</style>
</head>

<body class="gray-bg">
	<!-- top msg -->

	<!--检索工具条 -->

	<div class="demoTable">
		<span>切换楼层</span>
		<div class="layui-input-inline layui-form my-inline-block">
			<div class="layui-inline">
				<select name="interest" lay-filter="aihao">
					<option value="">11</option>
					<option value="0">A</option>
					<option value="1">B</option>

				</select>
			</div>
		</div>
		<div class="layui-inline">
			<input class="layui-input" name="bloc_name" id="bloc_name" autocomplete="off" placeholder="请输入">
		</div>
		<button class="dy-btn" lay-event="sousuo" data-type="reload">搜索</button>
		<button class="dy-btn newadd" lay-event="addbloc">添加房间</button>
		<button class="dy-btn batch-house" lay-event="addbloc">批量添加</button>

		<!-- 剖面展示 -->
		<div class="poumian">
			<span class="pou-span-1">
				<i></i>已出租(已入住)</span>
			<span class="pou-span-6">
				<i></i>未出租</span>
			<span class="pou-span-3">
				<i></i>到期</span>
			<span class="pou-span-4">
				<i></i>空置</span>
			<span class="pou-span-5">
				<i></i>有账单</span>
		</div>
	</div>
	<div class="wrapper wrapper-content">
		<!--房屋展示-->
		<div class="houseBigBox">
			<div class="houseBox">
				<div class="leftFloor">
					<p>11层</p>
					<span>150m²</span>
				</div>
				<ul>
					<li class="normal_li" houseArear="100">
						<p>甘肃商贸有限公司甘肃商贸有限公司</p>
						<span>1065.25m²/1101室</span>
						<span>2018-10-12到期</span>
					</li>
					<li class="vacancy_li" houseArear="500">
						<p>1065.25m²/1102室</p>
						<span>空置</span>
						<div class="clearfix">
							<p class="dybtn-p fl edit-house">
								<img src="images/edit.png" alt="" />
								<i class="edit">编辑</i>
							</p>
							<p class="dybtn-p fl delte-house">
								<img src="images/del.png" alt="" />
								<i class="del">删除</i>
							</p>

						</div>
					</li>
					<li class="rent_li" houseArear="400">
						<p>甘肃商贸有限公司甘肃商贸有限公司</p>
						<span>1065.25m²/1101室</span>
						<span>2018-10-12到期</span>
					</li>
				</ul>
			</div>
			<div class="houseBox">
				<div class="leftFloor">
					<p>11层</p>
					<span>150m²</span>
				</div>
				<ul>
					<li class="normal_li" houseArear="100">
						<p>甘肃商贸有限公司甘肃商贸有限公司</p>
						<span>1065.25m²/1101室</span>
						<span>2018-10-12到期</span>
					</li>
					<li class="vacancy_li" houseArear="500">
						<p>1065.25m²/1102室</p>
						<span>空置</span>
						<div class="clearfix">
							<p class="dybtn-p fl edit-house">
								<img src="images/edit.png" alt="" />
								<i class="edit">编辑</i>
							</p>
							<p class="dybtn-p fl delte-house">
								<img src="images/del.png" alt="" />
								<i class="del">删除</i>
							</p>

						</div>
					</li>
					<li class="rent_li" houseArear="400">
						<p>甘肃商贸有限公司甘肃商贸有限公司</p>
						<span>1065.25m²/1101室</span>
						<span>2018-10-12到期</span>
					</li>
				</ul>
			</div>
			<div class="houseBox">
				<div class="leftFloor">
					<p>13层</p>
					<span>150m²</span>
				</div>
				<ul>
					<li class="norent_li" houseArear="505">
						<p>甘肃商贸有限公司甘肃商贸有限公司</p>
						<span>1065.25m²/1101室</span>
						<span>2018-10-12到期</span>
					</li>
					<li class="rent_noli" houseArear="250">
						<p>甘肃商贸有限公司甘肃商贸有限公司</p>
						<span>1065.25m²/1101室</span>
						<span>2018-10-12到期</span>
					</li>
					<li class="expire_li" houseArear="1605">
						<p>甘肃商贸有限公司甘肃商贸有限公司</p>
						<span>1065.25m²/1101室</span>
						<span>2018-10-12到期</span>
					</li>
				</ul>
			</div>

		</div>
		<!-- <div class="rightBoxBg">
			<div class="rightBoxDiv">
				<div class="topTitle">
					<i class="layui-icon layui-icon-close"></i>
					<p>房间信息</p>
				</div>
				<iframe src="rightRoom.html"></iframe>
			</div>
		</div> -->

	</div>
	<!-- 全局js -->
	<script src="js/jquery-1.7.2.min.js"></script>
	<script src="lib/layui/layui.js"></script>
	<script type="text/javascript">
		layui.use(['form', 'element'],
			function () {
				layer = layui.layer;
				element = layui.element;
			});
		/*进入页面，计算每间房间的宽度*/
		$(function () {
			/*求顶部左侧宽度*/
			var windowWidth = document.body.clientWidth - 60;
			var leftWidth = $(".leftBox").width();
			var ulWidth1 = windowWidth - leftWidth
			/*求每个房间的宽度*/
			var ulWidth = $(".houseBox").eq(0).find("ul").width();//一层的宽度
			$(".houseBox").each(function (i) {
				var li_length = $(".houseBox").eq(i).find("li").length;//每层房间个数
				var houseAllArear = 0;//每一层房间的总面积
				$(".houseBox").eq(i).find("li").each(function (j) {
					var houseArear = $(".houseBox").eq(i).find("li").eq(j).attr("houseArear")
					houseAllArear += parseInt(houseArear);
				})
				var li_width2 = 0;//记录除了最后一个房间外的其余房间的总宽度
				$(".houseBox").eq(i).find("li").each(function (j) {
					var li_width1 = 0;//记录最终每个房间所占的宽度
					var houseArear = $(".houseBox").eq(i).find("li").eq(j).attr("houseArear")
					if (houseArear == 0) {
						$(this).hide();
					}
					if (j != li_length - 1) {
						li_width1 = (houseArear / houseAllArear) * ulWidth - 7;
						li_width2 += li_width1;
					} else if (j == li_length - 1) {
						li_width1 = ulWidth - li_width2 - 21;
					}
					$(".houseBox").eq(i).find("li").eq(j).width(li_width1)
				})
			})
		})
		/*点击房间显示右边详情*/
		$(".houseBigBox li").each(function () {
			$(this).click(function (event) {
				parent.$(".rightBoxBg").animate({ right: '0' });
				parent.$(".rightBoxDiv").animate({ right: '0' });


			});
		})

		// 点击新增按钮
		$('.newadd').on('click', function () {
			top.layer.open({
				type: 2,
				title: ['添加房间'],
				shadeClose: false, //点击遮罩关闭层
				area: ['700px', '360px'],
				content: 'house-cutaway-add.html',
				// end: function () {
				// 	location.reload(); //点击后刷新父页面
				// },
				btn: ['保存', '取消'],
				no: function (index, layero) {

				},
				yes: function (index, layero) { }

			});
		})

		//  点击空置房间编辑
		$(".houseBigBox li .edit-house").each(function () {
			$(this).click(function (event) {
				// 阻止事件冒泡
				event.stopPropagation();
				top.layer.open({
					type: 2,
					title: ['编辑房间'],
					shadeClose: false, //点击遮罩关闭层
					area: ['700px', '360px'],
					content: 'house-cutaway-add.html',
					// end: function () {
					// 	location.reload(); //点击后刷新父页面
					// },
					btn: ['保存', '取消'],
					no: function (index, layero) {

					},
					yes: function (index, layero) { }

				});
			});
		})


		//  点击空置房间删除
		$(".houseBigBox li .delte-house").each(function () {
			$(this).click(function (event) {
				// 阻止事件冒泡
				event.stopPropagation();
				top.layer.confirm('房间信息删除后无法恢复,确定要继续吗？', {
					title: '提示信息',
					area: '520px',
					btn: ['确定删除', '取消'],

				});
			});
		})
		//  点批量添加
		$(".batch-house").click(function(){
			top.layer.open({
					type: 2,
					title: ['批量添加房间'],
					shadeClose: false, //点击遮罩关闭层
					area: ['770px', '600px'],
					content: 'batch-house.html',
					// end: function () {
					// 	location.reload(); //点击后刷新父页面
					// },
					btn: ['保存', '取消'],
					no: function (index, layero) {

					},
					yes: function (index, layero) { }

				});

		})


		// /*点击右侧关闭*/
		// parent.$(".topTitle").click(function () {
		// 	parent.$(".rightBoxBg").animate({ right: '-100%' });
		// 	parent.$(".rightBoxDiv").animate({ right: '-1000px' });
		// })
	</script>
</body>

</html>